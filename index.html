<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Better ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ™‚å ±</title>
  <meta name="description" content="æ—¥æœ¬æ¨™æº–æ™‚(JST, GMT+9:00)ã‚’éŸ³å£°ã§ãŠçŸ¥ã‚‰ã›ã™ã‚‹æ™‚å ±ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚">
  <meta property="og:site_name" content="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ™‚å ±">
  <meta property="og:title" content="ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ™‚å ±">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://azo234.github.io/timesignal/">
  <meta property="og:image" content="">
  <meta property="og:description" content="æ—¥æœ¬æ¨™æº–æ™‚(JST, GMT+9:00)ã‚’éŸ³å£°ã§ãŠçŸ¥ã‚‰ã›ã™ã‚‹æ™‚å ±ã‚µãƒ¼ãƒ“ã‚¹ã§ã™ã€‚">
  <meta property="og:locale" content="ja_JP">
  <link rel="icon" href="./icons/clock16.ico" type="image/x-icon">
  <link rel="shortcut icon" href="./icons/clock32.ico" type="image/x-icon">
  <meta name="msvalidate.01" content="1048F383E1C3CEED17CE0D496934A81B" />
  <style>
    /* ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰ */
    body {
      text-align: center;
      margin: 0;
      padding: 20px;
      transition: background-color 0.3s, color 0.3s;
      background-color: #ffffff;
      color: #000000;
    }

    body a {
      color: #0066cc;
    }

    body input[type="text"],
    body input[type="range"],
    body input[type="checkbox"],
    body input[type="radio"] {
      color: #000000;
    }

    /* ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ */
    body.dark-mode {
      background-color: #1a1a1a;
      color: #e0e0e0;
    }

    body.dark-mode a {
      color: #66b3ff;
    }

    body.dark-mode input[type="text"] {
      background-color: #2a2a2a;
      color: #e0e0e0;
      border: 1px solid #444;
    }

    /* ãƒ¬ãƒƒãƒ‰ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ˜Ÿè¦³æ¸¬ç”¨ï¼‰ */
    body.red-dark-mode {
      background-color: #0d0000;
      color: #ff6666;
    }

    body.red-dark-mode a {
      color: #ff9999;
    }

    body.red-dark-mode input[type="text"] {
      background-color: #1a0000;
      color: #ff6666;
      border: 1px solid #440000;
    }

    body.red-dark-mode h1,
    body.red-dark-mode p,
    body.red-dark-mode label {
      color: #ff6666;
    }

    /* ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .theme-switcher {
      position: fixed;
      top: 10px;
      right: 10px;
      display: flex;
      gap: 5px;
      z-index: 1000;
    }

    .theme-btn {
      padding: 8px 12px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 0.9em;
      transition: opacity 0.3s;
    }

    .theme-btn:hover {
      opacity: 0.8;
    }

    .theme-btn.light {
      background-color: #ffffff;
      color: #000000;
      border: 3px solid #ccc;
    }

    .theme-btn.dark {
      background-color: #1a1a1a;
      color: #e0e0e0;
      border: 3px solid #444;
    }

    .theme-btn.red {
      background-color: #0d0000;
      color: #ff6666;
      border: 3px solid #440000;
    }

    .theme-btn.active {
      font-weight: bold;
      box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
    }

    /* ç„¡éŸ³ãƒˆã‚°ãƒ«ï¼ˆè¦‹ã‚„ã™ã„å¤§å‹ã‚¹ã‚¤ãƒƒãƒï¼‰ */
    .mute-toggle {
      position: relative;
      display: inline-block;
      width: 80px;
      height: 36px;
      margin: 0 8px;
      vertical-align: middle;
    }
    .mute-toggle input {
      opacity: 0;
      width: 0;
      height: 0;
    }
    .mute-slider {
      position: absolute;
      cursor: pointer;
      inset: 0;
      background-color: #e0e0e0;
      border: 2px solid #bdbdbd;
      transition: .2s;
      border-radius: 999px;
      box-sizing: border-box;
    }
    .mute-slider:before {
      position: absolute;
      content: "";
      height: 28px;
      width: 28px;
      left: 4px;
      top: 50%;
      transform: translateY(-50%);
      background-color: white;
      border-radius: 50%;
      box-shadow: 0 1px 3px rgba(0,0,0,0.3);
      transition: .2s;
    }
    /* ON=ç„¡éŸ³ */
    #chkMute:checked + .mute-slider {
      background-color: #ff5252;
      border-color: #e53935;
    }
    #chkMute:checked + .mute-slider:before {
      transform: translate(40px, -50%);
      background-color: #fff5f5;
    }
    /* ãƒ†ãƒ¼ãƒé€£å‹•ï¼ˆãƒ€ãƒ¼ã‚¯ï¼‰ */
    body.dark-mode .mute-slider { background-color: #424242; border-color: #616161; }
    body.dark-mode #chkMute:checked + .mute-slider { background-color: #d32f2f; border-color: #b71c1c; }
    /* ãƒ†ãƒ¼ãƒé€£å‹•ï¼ˆãƒ¬ãƒƒãƒ‰ãƒ€ãƒ¼ã‚¯ï¼‰ */
    body.red-dark-mode .mute-slider { background-color: #2a0000; border-color: #440000; }
    body.red-dark-mode #chkMute:checked + .mute-slider { background-color: #b71c1c; border-color: #7f0000; }

    /* ç„¡éŸ³çŠ¶æ…‹ãƒãƒƒã‚¸ */
    .mute-state {
      display: inline-block;
      min-width: 40px;
      padding: 7px 10px;
      border-radius: 6px;
      font-weight: 700;
      font-size: 0.9rem;
      text-align: center;
      vertical-align: middle;
      border: 1px solid #ccc;
    }
    .mute-on { background-color: #ffe5e5; color: #c62828; border-color: #ef9a9a; }
    .mute-off { background-color: #e8f5e9; color: #1b5e20; border-color: #a5d6a7; }
    body.dark-mode .mute-on { background-color: #3b1b1b; color: #ff9999; border-color: #6e2c2c; }
    body.dark-mode .mute-off { background-color: #1b3b1d; color: #a5d6a7; border-color: #2e7d32; }
    body.red-dark-mode .mute-on { background-color: #2a0000; color: #ff8080; border-color: #7f0000; }
    body.red-dark-mode .mute-off { background-color: #160000; color: #ffb3b3; border-color: #330000; }

    /* ã‚¢ãƒŠãƒ­ã‚°æ™‚è¨ˆ */
    .analog-clock {
      width: 200px;
      height: 200px;
      border: 8px solid #333;
      border-radius: 50%;
      position: relative;
      margin: 20px auto;
      background: #fff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.3), inset 0 0 30px rgba(0,0,0,0.1);
    }
    body.dark-mode .analog-clock {
      background: #2a2a2a;
      border-color: #555;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5), inset 0 0 30px rgba(0,0,0,0.3);
    }
    body.red-dark-mode .analog-clock {
      background: #1a0000;
      border-color: #660000;
      box-shadow: 0 4px 10px rgba(100,0,0,0.5), inset 0 0 30px rgba(100,0,0,0.2);
    }
    .analog-clock::after {
      content: '';
      position: absolute;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #333;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 10;
    }
    body.dark-mode .analog-clock::after { background: #fff; }
    body.red-dark-mode .analog-clock::after { background: #ff0000; }
    
    .clock-hand {
      position: absolute;
      bottom: 50%;
      left: 50%;
      transform-origin: bottom center;
      background: #333;
      border-radius: 6px 6px 0 0;
    }
    body.dark-mode .clock-hand { background: #fff; }
    body.red-dark-mode .clock-hand { background: #ff4444; }
    
    .hour-hand {
      width: 6px;
      height: 50px;
      margin-left: -3px;
    }
    .minute-hand {
      width: 4px;
      height: 70px;
      margin-left: -2px;
    }
    .second-hand {
      width: 2px;
      height: 80px;
      margin-left: -1px;
      background: #e53935;
    }
    body.dark-mode .second-hand { background: #ff5252; }
    body.red-dark-mode .second-hand { background: #ff0000; }
    
    .clock-number {
      position: absolute;
      font-size: 18px;
      font-weight: bold;
      color: #333;
    }
    body.dark-mode .clock-number { color: #fff; }
    body.red-dark-mode .clock-number { color: #ff6666; }
    
    .clock-number.n12 { top: 10px; left: 50%; transform: translateX(-50%); }
    .clock-number.n3 { top: 50%; right: 10px; transform: translateY(-50%); }
    .clock-number.n6 { bottom: 10px; left: 50%; transform: translateX(-50%); }
    .clock-number.n9 { top: 50%; left: 10px; transform: translateY(-50%); }
  </style>
</head>
<body>
  <!-- ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆãƒœã‚¿ãƒ³ -->
  <div class="theme-switcher">
    <button id="btnLight" class="theme-btn light active" title="ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰">â˜€ï¸</button>
    <button id="btnDark" class="theme-btn dark" title="ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰">ğŸŒ™</button>
    <button id="btnRed" class="theme-btn red" title="ãƒ¬ãƒƒãƒ‰ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ˜Ÿè¦³æ¸¬ç”¨ï¼‰">â­</button>
            <label class="mute-toggle" title="ç„¡éŸ³åˆ‡ã‚Šæ›¿ãˆ">
          <input id="chkMute" type="checkbox">
          <span class="mute-slider"></span>
        </label>
        <span id="lblMuteState" class="mute-state">éŸ³ã‚ã‚Š</span>
  </div>

  <div>
    <h1>Better ã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ™‚å ±</h1>
    <p>
      éŸ³å£°ã«ã¦<a href="https://www.nict.go.jp/JST/JST5.html" target="_blank">æ—¥æœ¬æ¨™æº–æ™‚(JST)</a>ã‚’èª­ã¿ä¸Šã’ã¾ã™ã€‚
      ä¸€éƒ¨ã®ã‚³ãƒ¼ãƒ‰ã¯AIç”Ÿæˆã‚’åˆ©ç”¨ã—ã¦ã„ã¾ã™ã€‚
    <br>Â© 2023 AZO â€” Licensed under the MIT License. Modified and published by Nosuke.
    </p>
    <div if="app" style="padding: 1rem 0px;">
      <p>
        <input id="chk24Hour" type="checkbox"><label for="chk24Hour">24æ™‚é–“åˆ¶</label>
       <!-- <input id="chkLocalClock" type="checkbox"><label for="chkLocalClock">ãƒ­ãƒ¼ã‚«ãƒ«æ™‚è¨ˆã‚’ä½¿ç”¨</label>-->

        <input id="chkStop" type="checkbox"><label for="chkStop">ä¸€æ™‚åœæ­¢(ç›®æŠ¼ã—ç·´ç¿’ç”¨)</label><br>
        <input id="rdoGoogle" type="radio" name="nmbVoice"><label for="rdoGoogle">ã€ŒGoogleã€</label>
        <input id="rdoYukkuri" type="radio" name="nmbVoice"><label for="rdoYukkuri">ã€Œã‚†ã£ãã‚Šã€</label>
        <input id="rdoZunda" type="radio" name="nmbVoice"><label for="rdoZunda">ã€Œãšã‚“ã ã‚‚ã‚“ã€</label><br>
        <strong>ãƒ†ã‚£ãƒƒã‚¯(é€šå¸¸)éŸ³æº:</strong>
        <select id="selTick">
          <option value="0">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</option>
          <option value="1">æœ¨.mp3</option>
        </select>
        <strong>ãƒ†ã‚£ãƒƒã‚¯(3ç§’å‰)éŸ³æº:</strong>
        <select id="selTick2">
          <option value="0">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</option>
          <option value="1">ã‚¯ãƒªãƒƒã‚¯.mp3</option>
          <option value="2">å£°å„ª.mp3</option>
          <option value="3">å£°å„ª(æ˜ã‚‹ã‚).mp3</option>
          <option value="4">ãƒã‚¯ã‚¿ã‚¯ã‚¿ã‚¤ãƒãƒ¼.mp3</option>
        </select>
        <strong>ãƒãƒ£ã‚¤ãƒ éŸ³æº:</strong>
        <select id="selChime">
          <option value="0">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ</option>
          <option value="1">çˆ†ç™º.mp3</option>
          <option value="2">æ™‚è¨ˆã®é˜.mp3</option>
          <option value="3">é³©æ™‚è¨ˆ.mp3</option>
          <option value="4">æ‚ªã„äºˆæ„Ÿ.mp3</option>
        </select><br>
        <input id="rngVolume" type="range" min="0" max="100">
        <input id="txtVolume" type="text" size="3" style="font-size: 0.7rem;">
      </p>
      <p>
        <input id="display_time" type="text" value="" style="font-size: 2em;" readonly />
        <div id="audios" style="display: none;"></div>
      </p>
      <!-- ã‚¢ãƒŠãƒ­ã‚°æ™‚è¨ˆ -->
      <div class="analog-clock">
        <div class="clock-number n12">12</div>
        <div class="clock-number n3">3</div>
        <div class="clock-number n6">6</div>
        <div class="clock-number n9">9</div>
        <div class="clock-hand hour-hand" id="hourHand"></div>
        <div class="clock-hand minute-hand" id="minuteHand"></div>
        <div class="clock-hand second-hand" id="secondHand"></div>
      </div>
    </div>
    <p>
      ãƒšãƒ¼ã‚¸ã‚’é–‹ã„ãŸæ™‚ã«ãƒ‡ãƒã‚¤ã‚¹ã¨JSTã®èª¤å·®ã‚’å–å¾—ã—ã€<br>
      ãƒ‡ãƒã‚¤ã‚¹æ™‚åˆ»ã‹ã‚‰èª¤å·®ã‚’å·®ã—å¼•ã„ã¦è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚<br>
      ï¼ˆNICTã®NTPâ†’ã‚µãƒ¼ãƒä¿®æ­£â†’ãƒ­ãƒ¼ã‚«ãƒ«ä¿®æ­£ï¼‰
    </p>
    <p>
      URLã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æŒ‡å®šã™ã‚‹ã“ã¨ã§ã€<br>
      åˆæœŸçŠ¶æ…‹ã‚’å¤‰æ›´ã§ãã¾ã™ã€‚<br>
  ä¾‹ï¼š https://.../timesignal/?h=24&v=1&vol=50&theme=dark&tick=0&tick2=0&chime=1<br>
  ï¼ˆ24æ™‚é–“åˆ¶+ã€Œã‚†ã£ãã‚Šã€å£°+éŸ³é‡50+ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰+Tick/Tick2=Opusã€Chime=MP3ï¼‰<br>
    </p>
    <p>
      h=24ï¼š 24æ™‚é–“åˆ¶ï¼ˆæŒ‡å®šãªã—ã§12æ™‚é–“åˆ¶ï¼‰<br>
      v=1ï¼š 1ã¯ã€Œã‚†ã£ãã‚Šã€ã€2ã¯ã€Œãšã‚“ã ã‚‚ã‚“ã€ã€ï¼ˆæŒ‡å®šãªã—ã§ã€ŒGoogleã€ï¼‰<br>
      m=1ï¼š 1ã¯ç„¡éŸ³ï¼ˆæŒ‡å®šãªã—ã§éŸ³ã‚ã‚Šï¼‰<br>
      vol=100ï¼š éŸ³é‡0ã€œ100ï¼ˆæŒ‡å®šãªã—ã§100ï¼‰<br>
      theme=light/dark/redï¼š ãƒ†ãƒ¼ãƒï¼ˆlight=ãƒ©ã‚¤ãƒˆã€dark=ãƒ€ãƒ¼ã‚¯ã€red=ãƒ¬ãƒƒãƒ‰ãƒ€ãƒ¼ã‚¯ï¼‰<br>
      tick=0/1ï¼š TickéŸ³æºï¼ˆ0=Opusã€1=Opusï¼‰<br>
      tick2=0/1ï¼š Tick2éŸ³æºï¼ˆ0=Opusã€1=Opusï¼‰<br>
      chime=0/1ï¼š ChimeéŸ³æºï¼ˆ0=Opusã€1=MP3ï¼‰
    </p>
    <p>
    Â©Google / Â©ã‚¢ã‚¯ã‚¨ã‚¹ãƒˆ / Â©VOICEVOX:ãšã‚“ã ã‚‚ã‚“
    <br>
    Â© 2023 AZO â€” Licensed under the MIT License.  Modified and published by Nosuke.

    </p>
  </div>

  <script>
    // ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½
    (function() {
      const body = document.body;
      const btnLight = document.getElementById('btnLight');
      const btnDark = document.getElementById('btnDark');
      const btnRed = document.getElementById('btnRed');
  const chkMute = /** @type {HTMLInputElement|null} */ (document.getElementById('chkMute'));
      const lblMuteState = document.getElementById('lblMuteState');

      // LocalStorageã‹ã‚‰ãƒ†ãƒ¼ãƒã‚’å¾©å…ƒ
      const savedTheme = localStorage.getItem('theme') || 'light';
      applyTheme(savedTheme);

      // ãƒ†ãƒ¼ãƒé©ç”¨é–¢æ•°
      function applyTheme(theme) {
        body.className = '';
        btnLight.classList.remove('active');
        btnDark.classList.remove('active');
        btnRed.classList.remove('active');

        switch(theme) {
          case 'dark':
            body.classList.add('dark-mode');
            btnDark.classList.add('active');
            break;
          case 'red':
            body.classList.add('red-dark-mode');
            btnRed.classList.add('active');
            break;
          default:
            btnLight.classList.add('active');
        }

        localStorage.setItem('theme', theme);
      }

      // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
      btnLight.addEventListener('click', () => applyTheme('light'));
      btnDark.addEventListener('click', () => applyTheme('dark'));
      btnRed.addEventListener('click', () => applyTheme('red'));

      // URLãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‹ã‚‰ãƒ†ãƒ¼ãƒã‚’è¨­å®š
      const params = new URLSearchParams(window.location.search);
      const themeParam = params.get('theme');
      if (themeParam && ['light', 'dark', 'red'].includes(themeParam)) {
        applyTheme(themeParam);
      }

      // ç„¡éŸ³è¡¨ç¤ºæ›´æ–°é–¢æ•°
      function updateMuteBadge() {
        if(!chkMute || !lblMuteState) return;
        if(chkMute.checked) {
          lblMuteState.textContent = 'ç„¡éŸ³';
          lblMuteState.classList.remove('mute-off');
          lblMuteState.classList.add('mute-on');
        } else {
          lblMuteState.textContent = 'éŸ³ã‚ã‚Š';
          lblMuteState.classList.remove('mute-on');
          lblMuteState.classList.add('mute-off');
        }
      }
      // åˆæœŸè¨­å®š
      updateMuteBadge();
      // å¤‰æ›´ç›£è¦–
      if(chkMute) {
        chkMute.addEventListener('change', updateMuteBadge);
      }
    })();
  </script>

  <script type="module" src="./src/timesignal_ui.ts"></script>

</body>
</html>
